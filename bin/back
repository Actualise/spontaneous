#!/usr/bin/env ruby

require "rubygems"
require "bundler"
Bundler.setup(:default)

$:.unshift(File.expand_path(File.dirname(__FILE__) + '/../lib'))
require 'spontaneous'
require 'cutaneous'
require 'thin'

env = (ENV['SPON_ENV'] || 'development').to_sym

Dir.chdir('test/fixtures/example_application')

Spontaneous.init(:mode => :back, :environment => :development)
Spontaneous.database.logger = Logger.new($stdout)

server = Rack::Handler.get('thin')

puts "Spontaneous::Back running on port #{Spontaneous::Rack.port}"

server.run Spontaneous::Rack::Back.application.to_app, :Host => '0.0.0.0', :Port => Spontaneous::Rack.port

