$editing-0: #ede9e4;
$editing-1: #e1ded8;
$editing-2: #dbd7d1;
$editing-3: darken($editing-2, 20%);
$editing-4: darken($editing-3, 20%);

$editing-focus: #8ac551;

$text-edit-width: 621px;

.editing-panel {

	z-index: 1001;
	background-color: $editing-0;
	background: $editing-0 url(/@spontaneous/static/editing-0-noise.png) 0 0 repeat;

	.editing-fields {
		@extend .clearfix;
    @include display-box;
    @include box-align(horizontal);
		padding: $unit;

	}
	.editing-toolbar {
		// background-color: $editing-1;
		background: $editing-1 url(/@spontaneous/static/editing-1-noise.png) 0 0 repeat;
		padding: $unit/2 $unit*2;
		.indent {

			background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAGCAYAAAACEPQxAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODUyNjQ3NjA0MTA0MTFFMDg3MzVEMzQxRjc2ODUxM0YiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODUyNjQ3NjE0MTA0MTFFMDg3MzVEMzQxRjc2ODUxM0YiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4NTI2NDc1RTQxMDQxMUUwODczNUQzNDFGNzY4NTEzRiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4NTI2NDc1RjQxMDQxMUUwODczNUQzNDFGNzY4NTEzRiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpE8+XgAAAAfSURBVHjaYmBgYFBiAhJ/mIEEO4hgAhEMIOI/QIABABqLAjW6aph5AAAAAElFTkSuQmCC) 0 0 repeat-x;
			// background: url(/@spontaneous/static/editing-toolbar-shadow-top.png) 0 0 repeat-x;
			position: absolute;
			top: 0;
			right: 0;
			left: 0;
			height: 6px;
		}
		&.bottom .indent {
			top: auto;
			bottom: 0;
			background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAGCAYAAAACEPQxAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NkI2NEVCN0M0MTA0MTFFMDg3MzVEMzQxRjc2ODUxM0YiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NkI2NEVCN0Q0MTA0MTFFMDg3MzVEMzQxRjc2ODUxM0YiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpGQjZCNDk2MTQxMDExMUUwODczNUQzNDFGNzY4NTEzRiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGQjZCNDk2MjQxMDExMUUwODczNUQzNDFGNzY4NTEzRiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PraoBnIAAAAdSURBVHjaYmBgYGBiAhIsIIIdRHCCCA6wGECAAQACQwAt8zOshgAAAABJRU5ErkJggg==) 0 0 repeat-x;
		}
		.buttons {
			@include display-box;
			@include box-orient(horizontal);
			@include box-pack(justify);
			// @include box-pack(end); // for right aligned buttons
			// @include box-align(end); // for right aligned buttons
			padding-top: $unit/2;
			width: $text-edit-width;
			.save, .cancel {
				@include button($action);
			}
			.cancel {
				@include button($editing-3);
        // margin-right: $unit; // for right aligned buttons
			}
			.save, .cancel {
				display: block;
				width: 128px;
			}
		}
		&.bottom .buttons {
			padding-bottom: $unit/2;
			padding-top: 0;
		}
	}
	.field-group-bg {
		@include rounded;
		// background-color: #6b6b6b;
		position: absolute;
		margin: 8px;
		top: 0px;
		bottom: 0px;
	}
	.field-group-bg.text {
		left: 0;
		right: 343px;
	}
	.field-group-bg.image {
		left: 629px;
		right: 0;
	}
	input[type="submit"] {
		visibility: hidden;
		position: absolute;
		width: 0;
		height: 0;
	}
	.field-group {
		position: relative;
		z-index: 1010;
		float: left;
		// margin: 8px 0 0 8px;
		padding: 8px;
		// margin-top: 8px;
		// margin-bottom: 8px;
		.field + .field {
			margin-top: 8px;
		}
		.name {
			@include rounded-top;
			@include box-sizing;
			@extend .interface;
			background-color: $editing-2;
			// background-image: url(/@spontaneous/static/paper-texture-dark.png);
			display: block;
			height: 16px;
			padding-left: 8px;
			padding-top: 2px;
			.comment {
				font-weight: normal;
				text-transform: none;
				margin-left: $unit;
				color: $editing-4;
			}
		}
		.value {
			@include rounded-bottom;
			border: solid 2px transparent;
			padding: 6px;
			background-color: white;
			textarea, input[type="text"] {
				font-family: $input-font-family;
				font-size: 11px;
				line-height: 14px;
				outline: none;
			}
			input[type="file"] {
				visibility: hidden;
				position: absolute;
				width: 0;
				height: 0;
			}
			textarea {
				@include box-sizing;
				border: none;
				width: 100%;
				padding-right: 64px;
			}
			input[type="text"] {
				@include box-sizing;
				width: 100%;
				border: none;
				display: block;
				font-weight: bold;
			}
		}


		.field.focus {
			.name {
				background-color: $editing-focus;
				color: white;
				.comment {
					color: white;
				}
			}
			.value {
				border-color: $editing-focus;
			}
		}
	}
	.field-group.text {
		width: $text-edit-width;
	}
	&.depth-2 {

		.editing-fields {
			padding: 0;
      @include box-orient(vertical);
		}
		.editing-toolbar {
			padding-left: $unit;
			padding-right: $unit;
			.buttons {
				width: 100%;
			}
		}
		.field-group.text {
			width: 100%;
			@include box-sizing;
		}
    .field-group.image {
      padding: $unit;
    }
	}
	.field-group.image {
		@include box-sizing;
    @extend .box-flexible;
		display: block;
		padding: $unit 0;
		.field {
			display: inline-block;
			vertical-align: top;
			min-width: 100px;
			margin-right: $unit;
			margin-bottom: $unit;
			margin-top: 0;
			margin-left: 0;
		}
		.field + .field {
			// margin-top: 0;
			// margin-left: $unit;
		}
		.field .value {
			position: relative;
			min-height: 70px;
			text-align: center;
			img {
				// max-height: 300px;
        max-width: 200px;
				@extend .shadow;
				cursor: pointer;
			}
			img:hover {
				outline: solid 1px $action;
			}
			img.empty {
				width: 50%;
				height: 100px;
			}
			.image-drop {
				// @include rounded;
        @include box-sizing;
				z-index: 2;
				position: absolute;
				top: 0;
				right: 0;
				bottom: 0;
				left: 0;

        &.drop-active,
        &:hover {
          border: solid 1px $action;
        }
      }
			.actions {
				margin: 0px;
				margin-left: 0;
				position: absolute;
				top: 0;
				right: 0;
				width: 60px;
				.button {
					display: block;
				}
				.button.clear {
					color: #5b5b5b;
					background-color: #d1d1d1;
					width: 100%;
				}
			}
			.info {
				position: absolute;
				left: 0;
				right: 0;
				bottom: 0;
				padding: $unit;
				@include image-overlay;
				@extend .interface;
				text-transform: none;
				@include display-box;
				@include box-orient(vertical);
        .filename {
          word-wrap: break-word;
        }
				.sizes {
					padding-top: $unit/2;
					@include display-box;
					@include box-orient(horizontal);
					@include box-pack(justify);
				}
			}
			.landscape {
				img {
					max-width: 200px;
					// max-height: 100px;
				}
				.actions {
					width: auto;
					display: block;
					margin: 8px 0 0 0;
					position: relative;
					.button {
						display: inline-block;
						width: 109px;
					}
					.button.clear {
						position: static;
					}
					.button.change {
						position: absolute;
						right: 0;
					}
				}
			}
		}
	}
}
@import "variables";

#editing {
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	#url-panel {
		@extend .bar;
		background-color: $level1;
		padding-left: $padding;
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
	}
	#function-panel {
		position: absolute;
		top: $bar-height;
		left: 0;
		right: 0;
		height: 34px;
	}
	#content-panel {
		position: absolute;
		top: $bar-height * 2.5;
		left: 0;
		right: 0;
		bottom: 0;
		overflow: auto;
		padding: 0 $padding;
		padding-bottom: 100px;
		.tabs {
			@include rounded-top;
			background-color: $level2;
			list-style: none;
			height: $bar-height;
			@extend .clearfix;
			.tab:first-child {
				@include rounded-top-left;
			}
			.tab {
				@extend .bar;
				display: block;
				float: left;
				padding-left: $padding;
				min-width: 130px;
				border-right: solid 1px $level4;
				cursor: pointer;
				&:hover {
					background-color: $blue;
				}
			}
			.tab.active {
				background-color: $level4;
				font-weight: bold;
			}
		}
		#content-wrapper {
			border-top: solid 1px $level3;
			background-color: $level1;
			.field-wrap {
				.edit, .preview {
					padding: $padding;
					background-color: $level3;
				}
				.field {
					@include rounded;
					width: 100%;
					.name, .value {
						display: table-cell;
					}
					.name {
						@include rounded-left;
						vertical-align: top;
						font-weight: bold;
						width: 150px;
						padding-right: $padding;
						text-align: right;
					}
					.value {
						@include rounded-right;
						padding-left: $padding;
					}
				}
				.field.edit {
					.name {
						@extend .bar;
					}
					.name {
						background-color: $level7;
					}
					.name.active {
						background-color: $blue;
						color: $white;
					}
					.value {
						padding-top: 0;
						padding-bottom: 0;
						padding-right: 0;
						padding-left: 0px;
						position: relative;
						input.input {
							@extend .bar;
							@include rounded-right;
							@extend .border-box;
							display: block;
							position: relative;
							left: 0;
							width: 100%;
							height: $bar-height;
							border: solid 2px $blue;
							outline: none;
							padding-left: $padding;
							vertical-align: top;
							&:focus {
								border-color: $blue;
							}
						}
					}
				}
				.field + .field {
					margin-top: $padding;
				}
			}
			.facet-contents-wrap .facet-contents-wrap .facet-drag-bar {
				display: none;
			}
			.facet-contents-wrap .editing .facet-contents-wrap .facet-drag-bar {
				display: block;
			}
			.facet.depth-1 .facet-contents-wrap {
				background-color: $level2;
			}
			.facet.depth-2 {
				background-color: $level1;
				.field-wrap .preview {
					background-color: $white;
				}
				.field-wrap .edit {
					background-color: $level1;
				}
				.facet-contents-wrap {
					background-color: $level1;
				}
			}
			.facet.depth-1 > .facet-bottom-bar {
				@include rounded-bottom;
				background-color: $level1;
			}
			.field-wrap + .facet-allowed {}
			.facet-allowed {
				background-color: $level3;
				padding: 0;
				.type-list {
					@include rounded-top;
					@extend .clearfix;
					padding-left: $padding;
					padding-right: $padding;
					padding-bottom: 6px;
					$a-height: $bar-height - 6;
					$a-pad: ($a-height - $line-height) / 2 - 1;
					a {
						@include rounded;
						display: block;
						float: left;
						min-width: 95px;
						padding: $a-pad 6px 0 6px;
						height: $a-height - $a-pad;
						background-color: $level2;
						margin-top: 6px;
						&:hover {
							background-color: $blue;
							color: $white;
						}
					}
					a + a {
						margin-left: 6px;
					}
				}
			}
			.page-entry-link h3 {
				@extend .bar;
				@include rounded;
				background-color: $level1;
				margin-bottom: $padding;
				font-size: 150%;
				padding-left: $padding;
				a {
					font-weight: normal;
				}
			}
			.facet-contents-wrap {
				padding: $padding;
				.facet-drag-bar {
					@include rounded-top;
					height: $bar-height - $padding;
					background-color: $level4;
				}
				.facet {
					margin-top: 2 * $padding;
				}
				.field-wrap {}
				.page .field-wrap {
					padding-bottom: $padding;
				}
			}
			.depth-2 .facet-contents-wrap {
				background-color: $level3;
			}
			.facet-bottom-bar {
				@include rounded-bottom;
				height: $padding;
				background-color: $level2;
			}
		}
	}
}

#page-fields .editing-panel,
.box-fields .editing-panel {
	.editing-fields, .editing-toolbar {
		padding-left: $container-padding;
		padding-right: $container-padding;
	}
	.field-group.text {
		padding-left: 0;
	}
}
.box-fields .editing-panel {
	.editing-toolbar.bottom .indent {
		opacity: 0.2;
	}
}
.markdown-editor .md-toolbar {
	@include display-box;
	@include box-orient;
	background-color: $editing-1;
	a {
		@extend .interface;
    @extend .no-select;
		color: $editing-4;
		display: block;
		border: solid 1px transparent;
		padding: 2px 6px;
		cursor: pointer;
	}
	a.active {
		border: solid 1px $editing-2;
		background-color: $editing-3;
	}
	a:hover {
		background-color: $editing-3;
	}
	a + a {
		margin-left: 10px;
	}
}

